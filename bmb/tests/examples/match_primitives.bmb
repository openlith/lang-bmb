# Pattern Matching with Primitive Types
# Demonstrates boolean exhaustiveness and integer @default requirement
#
# Booleans: Must cover both true and false (or use @default)
# Integers: Always require @default (infinite domain)

# Boolean pattern matching - exhaustive without @default
@node bool_to_string_code
@params flag:bool
@returns i32
@post ret == 1 || ret == 0

  @match %flag
    @case true:
      ret 1
    @case false:
      ret 0

# Integer pattern matching - @default is mandatory
@node classify_number
@params n:i32
@returns i32

  @match %n
    @case 0:
      ret 100
    @case 1:
      ret 101
    @case -1:
      ret 99
    @default:
      ret 0

# Compute Fibonacci-like sequence for small inputs
# Shows computation in match arms
@node small_fib
@params n:i32
@returns i32
@pre n >= 0

  @match %n
    @case 0:
      ret 0
    @case 1:
      ret 1
    @case 2:
      ret 1
    @case 3:
      ret 2
    @case 4:
      ret 3
    @case 5:
      ret 5
    @default:
      # For larger inputs, return -1 (not computed)
      ret -1

# Temperature classification with ranges approximated by cases
@node temp_category
@params celsius:i32
@returns i32

  @match %celsius
    @case 0:
      # Freezing point
      ret 1
    @case 100:
      # Boiling point
      ret 3
    @default:
      # Normal range
      ret 2
