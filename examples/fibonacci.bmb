# BMB Fibonacci
# Calculate the nth Fibonacci number

@node fibonacci
@params n:i32
@returns i32
@pre n >= 0
@post ret >= 0

  eq %is_zero n 0
  jif %is_zero _zero
  eq %is_one n 1
  jif %is_one _one
  sub %n1 n 1
  sub %n2 n 2
  call %fib1 fibonacci %n1
  call %fib2 fibonacci %n2
  add %r %fib1 %fib2
  ret %r
_zero:
  ret 0
_one:
  ret 1
